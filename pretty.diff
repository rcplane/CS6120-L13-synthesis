8d7
<     # Add parentheses?
10,11c9
<         def par(s):
<             return '({})'.format(s)
---
>         par = lambda s: '({})'.format(s)
13,14c11
<         def par(s):
<             return s
---
>         par = lambda s: s
17c14
<     if op in ('add', 'sub', 'mul', 'div', 'shl', 'shr', 'exp'):
---
>     if op in ('add', 'sub', 'mul', 'div', 'shl', 'shr', 'xor'):
27c24
<             'exp': '**',
---
>             'xor': '^',
42a40,56
>     elif op == 'stmt':
>         name = tree.children[0]
>         expr = pretty(tree.children[1], subst)
>         return '{} := {};\n'.format(subst.get(name, name), expr)
>     elif op == 'stmts':
>         return ''.join(pretty(child, subst) for child in tree.children)
>     elif op == 'for':
>         var = tree.children[0]
>         start = pretty(tree.children[1], subst)
>         end = pretty(tree.children[2], subst)
>         stmts = pretty(tree.children[3], subst)
>         return 'for {} = {} to {} do\n{}done;\n'.format(var, start, end, stmts)
>     elif op == 'start':
>         stmts = pretty(tree.children[0], subst)
>         expr = pretty(tree.children[1], subst)
>         return '{}{}'.format(stmts, expr)
> 
